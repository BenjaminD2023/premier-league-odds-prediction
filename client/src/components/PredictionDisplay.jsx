import React from 'react';
import { formatMoneylineWithProbability } from '../utils/helpers';

export default function PredictionDisplay({ prediction, onGenerate, isLoading }) {
  if (!prediction) {
    return (
      <div className="prediction-box">
        <h3>ðŸ¤– AI Moneyline Prediction</h3>
        <div className="prediction-content">
          <button 
            className="btn btn-success" 
            onClick={onGenerate}
            disabled={isLoading}
          >
            Generate AI Moneyline
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="prediction-box">
      <h3>ðŸ¤– AI Moneyline Prediction</h3>
      <div className="prediction-content">
        <div className="odds-display">
          <div className="odds-item">
            <span className="odds-label">Home Moneyline:</span>
            <span 
              className="odds-value"
              dangerouslySetInnerHTML={{ 
                __html: formatMoneylineWithProbability(prediction.homeWin) 
              }}
            />
          </div>
          <div className="odds-item">
            <span className="odds-label">Draw:</span>
            <span 
              className="odds-value"
              dangerouslySetInnerHTML={{ 
                __html: formatMoneylineWithProbability(prediction.draw) 
              }}
            />
          </div>
          <div className="odds-item">
            <span className="odds-label">Away Moneyline:</span>
            <span 
              className="odds-value"
              dangerouslySetInnerHTML={{ 
                __html: formatMoneylineWithProbability(prediction.awayWin) 
              }}
            />
          </div>
        </div>
        <div className="confidence-meter">
          <strong>Confidence Level:</strong>
          <div className="confidence-bar">
            <div className="confidence-fill" style={{ width: `${prediction.confidence}%` }}>
              {prediction.confidence}%
            </div>
          </div>
        </div>
        <p className="prediction-note">
          Curious about these numbers? Use the "Ask the AI Why" chat to dig deeper.
        </p>
        <p style={{ textAlign: 'center', marginTop: '10px', color: '#666', fontSize: '0.9em' }}>
          Generated by {prediction.model} at {new Date(prediction.timestamp).toLocaleTimeString()}
        </p>
      </div>
    </div>
  );
}
